<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>智捷接口文档数据</title>
</head>
<body>
<h2>欢迎您！</h2>
<p>登录成功，您已经进入接口文档页面。</p>

<p><a href="zhijielogin.html">返回登录页面</a></p>
<button id="fetchButton">点击访问接口</button>

<div >获取到接口文档数据</div>
<div id="content"></div>
<script>
  // 检查用户是否已登录
  const token = sessionStorage.getItem('token');
  if (!token) {
    window.location.href = 'zhijielogin.html'; // 如果未登录，跳转回登录页面
  }

  document.getElementById('fetchButton').addEventListener('click', function() {
    // 请求头部信息
    const headers = new Headers();
    headers.append('Content-Type', 'application/json');
    headers.append('Authorization', 'Bearer YourAccessTokenHere'); // 替换为您的授权信息
    headers.append('dxw', 'ddddd'); // 替换为您的授权信息

    // 设置 Fetch 请求的配置项，包括 headers
    const requestOptions = {
      method: 'GET', // 请求方法
      headers: headers // 设置请求头部
    };

    // 发起 Fetch 请求
    fetch('/demo/initial', requestOptions)
            .then(response => {
              if (!response.ok) {
                throw new Error('Network response was not ok');
              }
              return response.text();
            })
            .then(data => {
              window.sessionStorage.setItem('dddxw', 'dddx123123w');
              document.getElementById('content').innerHTML = data;
            })
            .catch(error => {
              console.error('There was a problem with the fetch operation:', error);
            });
  });
</script>
</body>
</html>
